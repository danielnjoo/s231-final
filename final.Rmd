---
title: "231_final"
author: "Margaret Chien, Amber Liu, Daniel Njoo"
date: "11/9/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(cache = TRUE)
```


# abstract
  Using the Twitter data set, we made clusters to see whether there were distinct personality groups and found five distinct groups. Then we looked at how the personality type relates to Twitter presence. We looked at the number of tweets per day and total tweets, and found that ____. Then we looked at klout score, which measures popularity, followers, and friends. We then looked at the actions of these people, specifically their favorites and the type of tweets they do. We found that ___.


source: https://www.kaggle.com/c/twitter-personality-prediction, data sent in private communication with competition holder from the privacy foundation

```{r}
# setwd('/Users/danielnjoo/Desktop/231proj')
library(readxl)
library(tidyverse)
data2<-readxl::read_xlsx('./twitter_data.xlsx')
```

587 columns, 2930 observations 
```{r}
data2 %>% dim()
```

18 broad categories
```{r}
names(data2)[-grep("X__",names(data2))]
```

recreating LIWC variables requires LIWC API access from https://www.receptiviti.ai/liwc-api-get-started

no extra information on variables given due to privacy concerns https://www.kaggle.com/c/twitter-personality-prediction/discussion/1886#latest-11996


cluster into categories, then visualize categories across variables:
- tweets/days, total tweets
- klout 
- followers
- favorites
- %retweets, replies, originals

- IWC?


#find elbowpoint for k
```{r}
rng<-2:20 #K from 2 to 20
tries <-100 #Run the K Means algorithm 100 times
avg.totw.ss <-integer(length(rng)) #Set up an empty vector to hold all of points
for(v in rng){ # For each value of the range variable
 v.totw.ss <-integer(tries) #Set up an empty vector to hold the 100 tries
 for(i in 1:tries){
   k.temp <- kmeans(all8, centers=v) #Run kmeans
   v.totw.ss[i] <- k.temp$tot.withinss #Store the total withinss
 }
 avg.totw.ss[v-1] <-mean(v.totw.ss) #Average the 100 total withinss
}
plot(rng, avg.totw.ss, type="b", main="Total Within SS by Various K",
 ylab="Average Total Within Sum of Squares",
 xlab="Value of K")

```

#attempted visualizations
```{r}
library(cluster)
library(HSAUR)
data(pottery)
# km    <- kmeans(pottery,3)
dissE <- daisy(all8, 3) 
dE2   <- dissE^2
sk2   <- silhouette(all8_clusters$cl, dE2)
plot(sk2)
```

```{r}
cl5<-clara(big5,10)
plot(silhouette(cl5))
```

```{r} 
#width .32, heuristics: https://www.stat.berkeley.edu/~spector/s133/Clus.html
cl6<-clara(dark3,3)
plot(silhouette(cl6))
```





